<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FNAE: Five Nights at Epstein's</title>
    <style>
        body { background: black; color: lime; font-family: monospace; text-align: center; margin: 0; padding: 20px; overflow: hidden; transition: all 0.3s; }
        h1 { font-size: 2.2em; margin-bottom: 15px; text-shadow: 0 0 10px red; }
        #clock { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); font-size: 2em; color: lime; text-shadow: 0 0 10px lime; z-index: 100; }
        #power-bar { position: fixed; top: 60px; right: 10px; width: 200px; height: 20px; background: #111; border: 2px solid lime; z-index: 100; }
        #power-fill { height: 100%; background: lime; width: 100%; transition: width 0.5s, background 0.3s; }
        #power-text { color: lime; font-size: 0.9em; margin-top: 5px; }
        .low-power #power-fill { background: red; }
        .low-power #power-text { color: red; animation: blink 1s infinite; }
        .surge #power-fill { animation: surge 1.5s; }
        @keyframes blink { 50% { opacity: 0.3; } }
        @keyframes surge { 0%,100% { background: lime; } 50% { background: yellow; box-shadow: 0 0 30px yellow; } }
        @keyframes glitch-shake { 0%,100% { transform: translate(0); } 20% { transform: translate(-3px,3px); } 40% { transform: translate(3px,-3px); } 60% { transform: translate(-2px,2px); } 80% { transform: translate(2px,-2px); } }
        @keyframes glitch-flicker { 0%,100% { opacity: 1; } 10% { opacity: 0.4; } 30% { opacity: 0.8; filter: invert(1); } 50% { opacity: 0.3; } 70% { filter: hue-rotate(90deg); } }
        #game-area { position: relative; width: 90%; max-width: 900px; height: 500px; margin: 0 auto; border: 5px solid lime; overflow: hidden; background: #000; box-shadow: 0 0 20px red; }
        #base-view, #monitor { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #base-view img, #camera-image { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%) sepia(0.1) brightness(0.7) contrast(1.3); transition: filter 0.3s; }
        #monitor.glitch #camera-image { animation: glitch-shake 0.4s, glitch-flicker 0.6s; }
        #base-view { display: block; }
        #monitor { display: none; }
        #doors-btn, #toggle-btn { position: absolute; left: 50%; transform: translateX(-50%); background: #001100; color: lime; border: 3px solid lime; font-family: monospace; cursor: pointer; transition: all 0.3s; z-index: 20; }
        #doors-btn { bottom: 80px; padding: 15px 40px; font-size: 1.8em; }
        #toggle-btn { bottom: 20px; padding: 15px 30px; font-size: 1.5em; }
        #doors-btn:hover:not(.disabled), #toggle-btn:hover:not(.disabled) { background: #003300; box-shadow: 0 0 20px lime; }
        .disabled { opacity: 0.5; cursor: not-allowed; }
        #static-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><rect width="10" height="10" fill="%23000"/><circle cx="5" cy="5" r="1" fill="%23fff" fill-opacity="0.08"/></svg>') repeat; opacity: 0.3; pointer-events: none; animation: static 0.08s infinite; z-index: 10; }
        @keyframes static { 0% { background-position: 0 0; } 100% { background-position: 20px 20px; } }
        #camera-label { position: absolute; top: 10px; left: 10px; font-size: 1.8em; background: rgba(0,0,0,0.8); padding: 5px 10px; border-radius: 5px; text-shadow: 0 0 5px lime; z-index: 15; }
        #buttons { margin-top: 140px; display: flex; flex-wrap: wrap; justify-content: center; }
        button { background: #001100; color: lime; border: 2px solid lime; padding: 12px 24px; margin: 8px; cursor: pointer; font-family: monospace; font-size: 1.1em; transition: all 0.3s; }
        button:hover { background: #003300; box-shadow: 0 0 15px lime; }
        #status { margin-top: 10px; font-size: 1.2em; }
        #game-over, #game-win { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 200; font-size: 3em; }
        #game-over { color: red; }
        #game-win { color: lime; }
        #restart-btn { margin-top: 30px; padding: 20px 50px; font-size: 1.5em; background: lime; color: black; border: none; border-radius: 10px; cursor: pointer; }
        .animatronic { position: absolute; bottom: 10%; height: 65%; transition: left 0.5s linear, opacity 0.8s, filter 0.5s; z-index: 25; pointer-events: none; opacity: 0.35; filter: brightness(0.7) grayscale(80%); display: none; background: #000; }
        .animatronic.active { opacity: 0.92; filter: brightness(1.3) grayscale(0%); transition: left 0.42s linear; }
    </style>
</head>
<body>
    <h1>FNAE: Five Nights at Epstein's - Night 1</h1>
    <div id="clock">12:00 AM</div>
    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="power-text">POWER: 100%</div>
    <div id="game-area">
        <div id="base-view">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/EFTA00002940-Temple_-_Blue-and-white_striped_building_with_a_red-and-white_labyrinth_in_front_set_against_a_tropical_backdrop_of_palm_trees_and_the_ocean_under_a_bright_sky.jpg" alt="Temple" crossorigin="anonymous">
            <div id="base-label">BASE: Temple Overlook - Doors Open</div>
            <button id="doors-btn">CLOSE DOORS</button>
        </div>
        <div id="monitor">
            <img id="camera-image" src="" alt="CCTV" crossorigin="anonymous">
            <div id="static-overlay"></div>
            <div id="camera-label">CAM Loading...</div>
        </div>
        <button id="toggle-btn">OPEN CAMERAS</button>
    </div>
    <div id="buttons"></div>
    <div id="status">Doors Open - Temple Secure</div>
    <div id="game-over">
        <div>GAME OVER</div>
        <div>THEY GOT YOU!</div>
        <button id="restart-btn">RESTART NIGHT</button>
    </div>
    <div id="game-win">
        <div id="win-title">NIGHT 1 COMPLETE!</div>
        <div>YOU SURVIVED!</div>
        <button id="restart-btn">NEXT NIGHT</button>
    </div>

    <script>
        const cameras = [
            { name: 'CAM01 - Temple Exterior', url: 'https://upload.wikimedia.org/wikipedia/commons/5/58/EFTA00002940-Temple_-_Blue-and-white_striped_building_with_a_red-and-white_labyrinth_in_front_set_against_a_tropical_backdrop_of_palm_trees_and_the_ocean_under_a_bright_sky.jpg' },
            { name: 'CAM02 - Island Bedroom', url: 'data:image/jpeg;base64,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' },
            { name: 'CAM03 - Dental/Exam Room', url: '/images/3.jpeg' },
            { name: 'CAM04 - Pool Area / Living Space', url: '/images/4.jpeg' },
            { name: 'CAM05 - Interior Hallway', url: '/images/5.jpeg' },
            { name: 'CAM06 - Beachfront Interior', url: '/images/6.jpeg' }
        ];

        const enemies = [
            'https://upload.wikimedia.org/wikipedia/commons/5/56/Donald_Trump_official_portrait.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/0/08/Ghislaine_Maxwell_%28cropped%29.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/d/d3/Bill_Clinton.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Bill_Clinton_with_Winnie_the_Pooh.jpg/800px-Bill_Clinton_with_Winnie_the_Pooh.jpg',
            'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgICAgICAgHBwcHCAoHBwcHBw8ICQcKFREWFhURExMYHSggGBolGxMTITEhMSkrLjouFx8zODMsNygtLisBCgoKDQ0NDw8NDysZFRkrKysrKystLSsrKysrKy0rKysrKys3KysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAQMAwgMBIgACEQEDEQH/xAAWAAEBAQAAAAAAAAAAAAAAAAAAAQf/xAAcEAEBAAIDAQEAAAAAAAAAAAAAATHwEYGRUUH/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AMOFFUABBUQAAAABRRFE4QBQABQAAAAAA4DoAAAAAAAAAAAAAAAAAAAAAAAABdyIAAAAAAAAAAAAAAAAAAAAAAAAAAAigAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACKigAAAgCgCKAAAAAAAAAAAAAAAAAHIICpVABFAAAEUAAAAAAAAAAAAAAAABBQKi1ACCglCgCooAigAAAAAAAAAAAAAAigAAAACVQBFAAAAAAAAAAAAAAAAAAAAAAABFAAAAAAAAAAAAAAAAAAAAAAAAARQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACoAB0ACgIKgAAAoCBQAFBAABUBYgAAAAAAoIL4ABQAAEFQAUARQBFARRABQBFAQUARQE+KKB6G4BS5SgIQAD8SKAkUBQAAAQqACgCosARUAAigqKoIAKP//Z',
            'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYxO4gWuUz07BRakSf3JxYY28sMp1Fm7fxMgJOVDF6Mn9WPGynwEva_wCvmi5f5JNQcWSxI6mp&s'
        ];

        let activeAnims = [];
        let currentNight = 1;
        let isGameOver = false;
        let nightStartTime;
        let power = 100;
        let isCamerasOpen = false;
        let doorsClosed = false;
        let canToggleDoors = true;
        let currentCam = 0;
        let powerDrainInterval, clockInterval, eventInterval;
        let lowPowerTriggered = false;
        let surgeActive = false;
        const SECONDS_PER_GAME_HOUR = 40;
        const CAMERA_DRAIN = 0.4;
        const DOORS_DRAIN = 1.5;
        const SPAWN_MIN = 12000;
        const SPAWN_MAX = 45000;
        const ACTIVATE_MIN = 10000;
        const ACTIVATE_MAX = 30000;
        const MOVE_SPEED = 4500;
        const GLITCH_CHANCE = 0.25;
        const SURGE_CHANCE = 0.08;

        cameras.forEach((cam, i) => {
            const btn = document.createElement('button');
            btn.textContent = cam.name;
            btn.onclick = () => switchCam(i);
            document.getElementById('buttons').appendChild(btn);
        });

        function initNight() {
            power = 100;
            isCamerasOpen = false;
            doorsClosed = false;
            canToggleDoors = true;
            currentCam = 0;
            isGameOver = false;
            lowPowerTriggered = false;
            surgeActive = false;
            nightStartTime = Date.now();
            activeAnims.forEach(a => a.img?.remove());
            activeAnims = [];
            updatePower();
            document.body.classList.remove('low-power', 'surge');
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('game-win').style.display = 'none';
            closeCameras();
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            clockInterval = setInterval(updateClock, 1000);
            eventInterval = setInterval(randomEvent, 8000);
            updateClock();
            document.querySelector('h1').textContent = `FNAE: Five Nights at Epstein's - Night ${currentNight}`;
            document.getElementById('win-title').textContent = `NIGHT ${currentNight} COMPLETE!`;
            document.getElementById('restart-btn').textContent = currentNight >= 5 ? 'YOU WON THE GAME!' : 'NEXT NIGHT';
            document.getElementById('doors-btn').textContent = 'CLOSE DOORS';
            document.getElementById('doors-btn').classList.remove('disabled');
            document.getElementById('toggle-btn').classList.remove('disabled');
            document.getElementById('status').textContent = 'Doors Open - Temple Secure';
            scheduleNextSpawn();
        }

        function updatePower() {
            document.getElementById('power-fill').style.width = Math.max(power, 0) + '%';
            document.getElementById('power-text').textContent = `POWER: ${Math.floor(power)}%`;
            if (power <= 20 && !lowPowerTriggered) {
                document.body.classList.add('low-power');
                lowPowerTriggered = true;
            } else if (power > 20) document.body.classList.remove('low-power');
            if (power <= 0) gameOverFunc();
        }

        function drainPower() {
            let drain = (isCamerasOpen ? CAMERA_DRAIN : 0) + (doorsClosed ? DOORS_DRAIN : 0);
            if (surgeActive) drain *= -1.5;
            power = Math.max(0, Math.min(100, power - drain));
            updatePower();
        }

        function updateClock() {
            const elapsed = (Date.now() - nightStartTime) / 1000;
            const gameHours = elapsed / SECONDS_PER_GAME_HOUR;
            if (gameHours >= 6) return winNight();
            const hour = 12 + Math.floor(gameHours);
            const min = Math.floor((gameHours % 1) * 60);
            document.getElementById('clock').textContent = `${hour % 12 || 12}:${min.toString().padStart(2, '0')} AM`;
        }

        function switchCam(idx) {
            if (isGameOver || doorsClosed) return;
            currentCam = idx;
            document.getElementById('camera-image').src = cameras[idx].url;
            document.getElementById('camera-label').textContent = cameras[idx].name;
            if (Math.random() < GLITCH_CHANCE) {
                document.getElementById('monitor').classList.add('glitch');
                setTimeout(() => document.getElementById('monitor').classList.remove('glitch'), 1200);
            }
            activeAnims.forEach(a => {
                a.img.style.display = (a.assignedCam === idx) ? 'block' : 'none';
            });
        }

        function randomEvent() {
            if (isGameOver) return;
            if (Math.random() < SURGE_CHANCE) {
                surgeActive = true;
                document.body.classList.add('surge');
                power = Math.min(100, power + 30);
                updatePower();
                setTimeout(() => {
                    surgeActive = false;
                    document.body.classList.remove('surge');
                }, 4000);
            }
        }

        function scheduleNextSpawn() {
            if (isGameOver) return;
            const delay = SPAWN_MIN + Math.random() * (SPAWN_MAX - SPAWN_MIN);
            setTimeout(spawnAnim, delay);
        }

        function spawnAnim() {
            if (isGameOver) return;
            const assignedCam = Math.floor(Math.random() * cameras.length);
            const src = enemies[Math.floor(Math.random() * enemies.length)];
            const img = document.createElement('img');
            img.src = src;
            img.className = 'animatronic';
            img.style.left = (Math.random() * 70 + 10) + '%';
            img.onerror = () => { img.style.background = '#000'; img.src = ''; };
            document.getElementById('monitor').appendChild(img);
            const obj = { img, assignedCam, position: parseFloat(img.style.left), isActive: false };
            activeAnims.push(obj);
            const delay = ACTIVATE_MIN + Math.random() * (ACTIVATE_MAX - ACTIVATE_MIN);
            obj.activationTimer = setTimeout(() => {
                if (!doorsClosed) activate(obj);
            }, delay);
            scheduleNextSpawn();
        }

        function activate(obj) {
            if (isGameOver || obj.isActive || !obj.img.parentNode || doorsClosed) return;
            obj.isActive = true;
            obj.img.classList.add('active');
            obj.img.style.left = '-15%';
            setTimeout(() => {
                if (obj.img.parentNode && obj.isActive && !doorsClosed) obj.img.style.left = '115%';
            }, 300);
            obj.moveEndTimer = setTimeout(() => {
                if (obj.img.parentNode && obj.isActive) {
                    if (!doorsClosed) {
                        jumpscare(obj.img);
                    } else {
                        reset(obj);
                    }
                }
            }, MOVE_SPEED + 300);
        }

        function jumpscare(target) {
            if (target && target.parentNode) {
                target.style.transition = 'all 0.35s';
                target.style.left = '48%';
                target.style.bottom = '-5%';
                target.style.height = '110%';
                target.style.transform = 'scale(2)';
                target.style.filter = 'brightness(3) contrast(3.5) saturate(3)';
                target.style.zIndex = '500';
            }
            isGameOver = true;
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            document.getElementById('toggle-btn').classList.add('disabled');
            document.getElementById('doors-btn').classList.add('disabled');
            setTimeout(() => document.getElementById('game-over').style.display = 'flex', 800);
        }

        function reset(obj) {
            if (!obj.img.parentNode) return;
            obj.isActive = false;
            obj.img.classList.remove('active');
            obj.img.style.transition = 'left 1.2s ease-out';
            obj.img.style.left = (Math.random() * 70 + 10) + '%';
            clearTimeout(obj.activationTimer);
            clearTimeout(obj.moveEndTimer);
        }

        function closeDoorsAction() {
            if (!canToggleDoors || isGameOver) return;
            doorsClosed = true;
            canToggleDoors = false;
            document.getElementById('doors-btn').textContent = 'OPEN DOORS';
            document.getElementById('doors-btn').classList.add('disabled');
            document.getElementById('base-label').textContent = 'BASE: Temple Overlook - Doors Closed';
            document.getElementById('status').textContent = 'Doors Closed - Heavy Drain';
            activeAnims.forEach(obj => {
                clearTimeout(obj.activationTimer);
                clearTimeout(obj.moveEndTimer);
                if (obj.isActive) {
                    obj.isActive = false;
                    obj.img.classList.remove('active');
                    obj.img.style.left = (Math.random() * 70 + 10) + '%';
                }
            });
            setTimeout(() => {
                canToggleDoors = true;
                document.getElementById('doors-btn').classList.remove('disabled');
            }, 8000);
        }

        function openDoorsAction() {
            if (!canToggleDoors || isGameOver) return;
            doorsClosed = false;
            document.getElementById('doors-btn').textContent = 'CLOSE DOORS';
            document.getElementById('base-label').textContent = 'BASE: Temple Overlook - Doors Open';
            document.getElementById('status').textContent = isCamerasOpen ? 'Cameras Open - Monitoring...' : 'Doors Open - Temple Secure';
        }

        function closeCameras() {
            isCamerasOpen = false;
            document.getElementById('base-view').style.display = 'block';
            document.getElementById('monitor').style.display = 'none';
            document.getElementById('toggle-btn').textContent = 'OPEN CAMERAS';
            document.getElementById('buttons').style.display = 'none';
            document.getElementById('status').textContent = doorsClosed ? 'Doors Closed - Heavy Drain' : 'Doors Open - Temple Secure';
            clearInterval(powerDrainInterval);
        }

        function openCameras() {
            if (power <= 0 || isGameOver) return;
            isCamerasOpen = true;
            document.getElementById('base-view').style.display = 'none';
            document.getElementById('monitor').style.display = 'block';
            document.getElementById('toggle-btn').textContent = 'CLOSE CAMERAS';
            document.getElementById('buttons').style.display = 'flex';
            document.getElementById('status').textContent = doorsClosed ? 'Doors Closed - Cams Active' : 'Cameras Open - Monitoring...';
            powerDrainInterval = setInterval(drainPower, 1000);
            switchCam(currentCam);
        }

        function gameOverFunc() {
            isGameOver = true;
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            document.getElementById('toggle-btn').classList.add('disabled');
            document.getElementById('doors-btn').classList.add('disabled');
            setTimeout(() => document.getElementById('game-over').style.display = 'flex', 800);
        }

        function winNight() {
            isGameOver = true;
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            document.getElementById('game-win').style.display = 'flex';
            if (currentNight >= 5) {
                document.getElementById('win-title').textContent = 'YOU SURVIVED ALL 5 NIGHTS!';
                document.getElementById('restart-btn').textContent = 'PLAY AGAIN';
            }
        }

        document.getElementById('toggle-btn').onclick = () => isGameOver ? null : (isCamerasOpen ? closeCameras() : openCameras());
        document.getElementById('doors-btn').onclick = () => isGameOver ? null : (doorsClosed ? openDoorsAction() : closeDoorsAction());
        document.getElementById('restart-btn').onclick = () => {
            currentNight = currentNight >= 5 ? 1 : currentNight + 1;
            initNight();
        };

        initNight();
    </script>
</body>
</html>

